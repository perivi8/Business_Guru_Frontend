/* Tailwind CSS with Custom Components for Angular Material Integration */

// Tailwind CSS directives
@tailwind base;
@tailwind components;
@tailwind utilities;

@import '@angular/material/prebuilt-themes/indigo-pink.css';

// Import Google Fonts
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap');

@layer base {
  * {
    @apply m-0 p-0 box-border;
  }

  html {
    @apply overflow-x-hidden w-screen max-w-full overflow-y-scroll scroll-smooth;
    overscroll-behavior: none !important;
  }

  body {
    @apply font-sans bg-gradient-body bg-fixed text-text-primary leading-relaxed font-normal antialiased;
    @apply overflow-x-hidden w-screen max-w-full relative scroll-smooth;
    touch-action: pan-y !important;
    overscroll-behavior-x: none !important;
    
    // Add padding-top to account for fixed navbar height (64px/4rem)
    // Exclude full-screen pages that don't need navbar padding on ALL screen sizes
    &:not(.login-page):not(.register-page):not(.forgot-password-page):not(.new-enquiry-page) {
      @apply pt-16;
      
      // Ensure padding-top is applied on all screen sizes
      @media (max-width: 768px) {
        @apply pt-16; // Mobile
      }
      
      @media (min-width: 769px) and (max-width: 1024px) {
        @apply pt-16; // Tablet
      }
      
      @media (min-width: 1025px) {
        @apply pt-16; // Desktop
      }
    }
    
    // Explicitly ensure NO padding-top for full-screen pages on ALL screen sizes
    &.login-page,
    &.register-page,
    &.forgot-password-page,
    &.new-enquiry-page {
      padding-top: 0 !important;
      
      // Explicitly remove padding on all screen sizes
      @media (max-width: 768px) {
        padding-top: 0 !important; // Mobile - force override
      }
      
      @media (min-width: 769px) and (max-width: 1024px) {
        padding-top: 0 !important; // Tablet - force override
      }
      
      @media (min-width: 1025px) {
        padding-top: 0 !important; // Desktop - force override
      }
    }
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-semibold leading-tight text-text-primary mb-4;
  }

  h1 { @apply text-5xl font-bold; }
  h2 { @apply text-4xl font-semibold; }
  h3 { @apply text-3xl font-semibold; }
  h4 { @apply text-2xl font-semibold; }
  h5 { @apply text-xl font-semibold; }
  h6 { @apply text-lg font-semibold; }

  p {
    @apply mb-4 text-text-secondary leading-relaxed;
  }
}

@layer components {
  // Layout Components
  .container {
    @apply max-w-7xl mx-auto px-lg w-full box-border overflow-x-hidden relative min-w-0;
    max-width: calc(100vw - 2rem);
  }

  .container-sm { @apply max-w-2xl; }
  .container-md { @apply max-w-3xl; }
  .container-lg { @apply max-w-5xl; }
  .container-xl { @apply max-w-6xl; }
  .container-2xl { @apply max-w-7xl; }

  // Card Components
  .card {
    @apply bg-surface rounded-2xl shadow-lg p-xl mb-lg border border-border-light;
    @apply transition-all duration-300 ease-out relative overflow-hidden;
    
    &::before {
      @apply absolute inset-0 opacity-0 transition-opacity duration-300 pointer-events-none;
      content: '';
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
    }
    
    &:hover {
      @apply shadow-2xl -translate-y-1 scale-105 border-primary-light;
      
      &::before {
        @apply opacity-100;
      }
    }
    
    &.card-sm { @apply p-lg; }
    &.card-lg { @apply p-2xl; }
    
    &.card-glass {
      @apply backdrop-blur-md border-white/30;
      background: rgba(255, 255, 255, 0.7);
    }
  }

  .modern-card {
    @apply bg-surface rounded-xl shadow-md border border-border-light;
    @apply transition-all duration-300 ease-out relative overflow-hidden;
    
    &::before {
      @apply absolute top-0 left-0 right-0 h-1 bg-gradient-primary;
      @apply scale-x-0 origin-left transition-transform duration-300;
      content: '';
    }
    
    &:hover {
      @apply -translate-y-1 shadow-xl;
      
      &::before {
        @apply scale-x-100;
      }
    }
  }

  // Button Components
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-lg py-3;
    @apply border-2 border-transparent rounded-2xl cursor-pointer;
    @apply text-sm font-semibold font-sans no-underline;
    @apply transition-all duration-200 ease-out relative overflow-hidden;
    
    &:focus {
      @apply outline-none ring-4 ring-primary/10;
    }
    
    &:disabled {
      @apply opacity-50 cursor-not-allowed;
      transform: none !important;
    }
    
    &.btn-primary {
      @apply bg-primary text-white shadow;
      
      &:hover:not(:disabled) {
        @apply bg-primary-dark shadow-lg -translate-y-0.5 scale-105;
      }
      
      &:active {
        @apply translate-y-0 scale-95;
      }
    }
    
    &.btn-success {
      @apply bg-status-success text-white shadow;
      
      &:hover:not(:disabled) {
        @apply shadow-lg -translate-y-0.5 scale-105;
        background-color: #059669;
      }
    }
    
    &.btn-danger {
      @apply bg-status-error text-white shadow;
      
      &:hover:not(:disabled) {
        @apply shadow-lg -translate-y-0.5 scale-105;
        background-color: #DC2626;
      }
    }
    
    &.btn-warning {
      @apply bg-status-warning text-white shadow;
      
      &:hover:not(:disabled) {
        @apply bg-accent-dark shadow-lg -translate-y-0.5 scale-105;
      }
    }
    
    &.btn-secondary {
      @apply bg-surface text-text-primary border-border;
      
      &:hover:not(:disabled) {
        @apply bg-secondary border-text-muted -translate-y-0.5 scale-105;
      }
    }
    
    &.btn-outline {
      @apply bg-transparent text-primary border-primary;
      
      &:hover:not(:disabled) {
        @apply bg-primary text-white -translate-y-0.5 scale-105;
      }
    }
    
    &.btn-ghost {
      @apply bg-transparent text-text-secondary;
      
      &:hover:not(:disabled) {
        @apply bg-secondary text-text-primary;
      }
    }
    
    &.btn-sm {
      @apply px-4 py-2 text-xs;
    }
    
    &.btn-lg {
      @apply px-xl py-md text-base;
    }
    
    &.btn-xl {
      @apply px-2xl py-lg text-lg;
    }
  }

  // Form Components
  .form-group {
    @apply mb-lg;
  }

  .form-control {
    @apply w-full px-md py-3 border-2 border-border rounded-lg;
    @apply text-base font-sans bg-surface text-text-primary;
    @apply transition-all duration-200 ease-out;
    
    &:focus {
      @apply outline-none border-primary ring-4 ring-primary/10 bg-background;
    }
    
    &:hover:not(:focus) {
      @apply border-text-muted;
    }
    
    &::placeholder {
      @apply text-text-muted;
    }
    
    &:disabled {
      @apply bg-secondary text-text-muted cursor-not-allowed;
    }
  }

  .form-label {
    @apply block mb-2 font-semibold text-text-primary font-sans text-sm;
    
    &.required::after {
      @apply text-status-error;
      content: ' *';
    }
    
    &.optional {
      @apply text-text-secondary font-normal;
      
      &::after {
        @apply italic text-xs;
        content: ' (Optional)';
      }
    }
  }

  // Status Badges
  .status-badge {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full;
    @apply text-xs font-semibold uppercase tracking-wide border;
    
    &.pending {
      @apply bg-purple-100 text-purple-700 border-purple-200;
    }
    
    &.interested {
      @apply bg-status-success-light text-status-success border-status-success/20;
    }
    
    &.not-interested {
      @apply bg-status-error-light text-status-error border-status-error/20;
    }
    
    &.hold {
      @apply bg-status-warning-light text-status-warning border-status-warning/20;
    }
    
    &.processing {
      @apply bg-status-info-light text-status-info border-status-info/20;
    }
  }

  // Table Components
  .table {
    @apply w-full bg-surface rounded-xl overflow-hidden shadow;
    border-collapse: separate;
    border-spacing: 0;
    
    th, td {
      @apply px-md py-3 text-left border-b border-border-light;
    }
    
    th {
      @apply bg-surface-alt font-semibold font-heading text-text-primary;
      @apply text-sm uppercase tracking-wide border-b-2 border-border;
    }
    
    td {
      @apply text-text-secondary text-sm;
    }
    
    tr:hover {
      @apply bg-background-alt;
    }
    
    tr:last-child td {
      @apply border-b-0;
    }
  }

  // Navbar Components
  .navbar {
    @apply bg-surface text-text-primary py-3 shadow-md border-b border-border-light;
    @apply sticky top-0 z-50 backdrop-blur-sm;
    
    .nav-container {
      @apply flex justify-between items-center max-w-7xl mx-auto px-lg;
    }
    
    .nav-brand {
      @apply font-heading text-2xl font-bold no-underline text-primary;
      @apply flex items-center gap-2;
    }
    
    .nav-menu {
      @apply flex list-none gap-2 m-0;
      
      .nav-item {
        .nav-link {
          @apply text-text-secondary no-underline px-3 py-2 rounded-lg;
          @apply transition-all duration-200 ease-out font-medium text-sm;
          
          &:hover {
            @apply bg-secondary text-text-primary -translate-y-0.5;
          }
          
          &.active {
            @apply bg-primary text-white shadow;
          }
        }
      }
    }
  }

  // Alert Components
  .alert {
    @apply px-md py-3 rounded-lg mb-md border text-sm;
    
    &.alert-error {
      @apply text-red-800 bg-red-50 border-red-200;
    }
    
    &.alert-success {
      @apply text-green-800 bg-green-50 border-green-200;
    }
    
    &.alert-warning {
      @apply text-yellow-800 bg-yellow-50 border-yellow-200;
    }
    
    &.alert-info {
      @apply text-blue-800 bg-blue-50 border-blue-200;
    }
  }

  // Legacy support
  .error {
    @apply px-md py-3 rounded-lg mb-md border text-sm;
    @apply text-red-800 bg-red-50 border-red-200;
  }

  .success {
    @apply px-md py-3 rounded-lg mb-md border text-sm;
    @apply text-green-800 bg-green-50 border-green-200;
  }

  // File Upload
  .file-upload {
    @apply border-2 border-dashed border-border rounded-xl p-xl text-center;
    @apply cursor-pointer transition-all duration-200 ease-out bg-surface-alt;
    
    &:hover {
      @apply border-primary bg-primary/5 -translate-y-1;
    }
    
    &.dragover {
      @apply border-primary bg-primary/10 shadow-lg;
    }
    
    p {
      @apply text-text-muted mt-2 mb-0;
    }
  }

  // Loading States
  .loading {
    @apply flex flex-col justify-center items-center p-2xl gap-4;
    
    p {
      @apply text-text-muted text-sm;
    }
  }

  // Glassmorphism & Modern Effects
  .glass {
    @apply backdrop-blur-md saturate-180 shadow-lg;
    background: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.18);
  }

  .glass-dark {
    @apply backdrop-blur-md saturate-180;
    background: rgba(15, 23, 42, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .gradient-text {
    @apply bg-gradient-primary bg-clip-text text-transparent font-bold;
  }

  .neon-text {
    @apply text-primary;
    text-shadow: 
      0 0 10px rgba(79, 70, 229, 0.5),
      0 0 20px rgba(79, 70, 229, 0.3),
      0 0 30px rgba(79, 70, 229, 0.2);
  }

  .shimmer {
    @apply relative overflow-hidden;
    
    &::before {
      @apply absolute top-0 w-full h-full;
      content: '';
      left: -100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmer 2s infinite;
    }
  }

  // Page Header Back Button
  .page-header .back-button {
    @apply w-12 h-12 flex items-center justify-center mr-4;
    @apply rounded-lg border transition-all duration-300 ease-out backdrop-blur-md;
    background: rgba(255, 255, 255, 0.15) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: white !important;
    
    &:hover {
      @apply scale-105 shadow-lg;
      background: rgba(255, 255, 255, 0.25) !important;
      transform: translateX(-2px) scale(1.05) !important;
    }
    
    mat-icon {
      @apply text-2xl text-white m-0;
      font-size: 24px !important;
      width: 24px !important;
      height: 24px !important;
    }
  }
}

// Angular Material Overrides
.mat-mdc-form-field {
  @apply w-full mb-0 pt-3;
  
  .mat-mdc-form-field-wrapper {
    @apply pb-0 pt-2;
  }
  
  .mat-mdc-form-field-infix {
    @apply py-2;
    min-height: 40px !important;
  }
  
  .mat-mdc-input-element {
    @apply px-3 py-2 text-sm leading-normal;
    height: auto !important;
    min-height: 20px !important;
  }
  
  .mat-mdc-form-field-outline {
    @apply rounded-lg;
    border-width: 2px !important;
  }
  
  .mat-mdc-form-field-label {
    @apply text-sm font-medium text-text-secondary;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
  
  &:not(.mat-mdc-form-field-has-icon-suffix):not(.mat-focused):not(.ng-invalid) {
    .mat-mdc-form-field-label:not(.mat-mdc-form-field-label-floating) {
      top: 50% !important;
      transform: translateY(-50%) !important;
    }
  }
  
  &.mat-focused,
  &.mat-mdc-form-field-has-icon-suffix,
  &.ng-invalid {
    .mat-mdc-form-field-label {
      @apply top-1 bg-surface px-1 z-10;
      transform: translateY(0) scale(0.75) !important;
      color: var(--primary) !important;
    }
  }
  
  &.mat-focused {
    .mat-mdc-form-field-outline {
      border-color: var(--primary) !important;
      border-width: 2px !important;
    }
  }
  
  .mat-mdc-form-field-label.mat-mdc-form-field-label-floating {
    @apply top-1 bg-surface px-1 z-10;
    transform: translateY(0) scale(0.75) !important;
  }
  
  &.mat-mdc-form-field-has-icon-suffix .mat-mdc-form-field-label,
  &.mat-focused .mat-mdc-form-field-label,
  &.ng-invalid .mat-mdc-form-field-label {
    @apply top-1 bg-surface px-1 z-10;
    transform: translateY(0) scale(0.75) !important;
  }
  
  &:not(.mat-focused):hover {
    .mat-mdc-form-field-outline {
      border-color: var(--text-muted) !important;
    }
  }
}

.mat-mdc-select {
  .mat-mdc-select-value {
    @apply text-base leading-normal;
  }
  
  .mat-mdc-select-placeholder {
    @apply text-text-muted;
  }
}

// Global Icon Styling
mat-icon {
  @apply inline-flex items-center justify-center align-middle leading-none;
  
  &.mat-icon {
    @apply inline-flex items-center justify-center;
  }
}

.mat-mdc-button, .mat-mdc-raised-button, .mat-mdc-outlined-button, .mat-mdc-fab, .mat-mdc-mini-fab {
  mat-icon {
    @apply inline-flex items-center justify-center m-0;
  }
}

.mat-mdc-table, .mat-mdc-list {
  mat-icon {
    @apply inline-flex items-center justify-center align-middle;
  }
}

.mat-mdc-card, .card {
  mat-icon {
    @apply inline-flex items-center justify-center;
  }
}

// Global Layout Stability
* {
  @apply max-w-full box-border;
}

.mat-mdc-form-field,
.mat-mdc-card,
.mat-mdc-table,
.mat-stepper-horizontal,
.mat-horizontal-stepper {
  @apply max-w-full box-border overflow-x-hidden;
}

router-outlet + * {
  @apply max-w-full overflow-x-hidden box-border;
}

app-root {
  @apply block w-screen max-w-full overflow-x-hidden box-border;
}

.fixed-header-offset {
  padding-top: 70px;
}

main, .main-content {
  @apply pt-3;
  min-height: calc(100vh - 70px);
}

// Responsive Design
@media (max-width: 1024px) {
  .container {
    @apply px-md;
  }
}

@media (max-width: 768px) {
  body {
    padding-top: 70px !important;
  }
  
  .navbar .nav-menu {
    @apply flex-col gap-2;
  }
  
  .container {
    @apply px-4;
  }
  
  .card {
    @apply p-lg;
  }
  
  .grid {
    &.grid-2,
    &.grid-3,
    &.grid-4 {
      @apply grid-cols-1;
    }
  }
  
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }
}

@media (max-width: 480px) {
  .container {
    @apply px-2;
  }
  
  .card {
    @apply p-4;
  }
  
  h1 { @apply text-3xl; }
  h2 { @apply text-2xl; }
  h3 { @apply text-xl; }
}

